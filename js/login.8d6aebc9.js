(function(t){function e(e){for(var n,i,s=e[0],l=e[1],c=e[2],u=0,p=[];u<s.length;u++)i=s[u],o[i]&&p.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,s=1;s<r.length;s++){var l=r[s];0!==o[l]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},o={login:0},a=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(){return Promise.resolve()},i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;a.push([13,"chunk-vendors","chunk-common"]),r()})({"010b":function(t,e,r){"use strict";var n=r("70b5"),o=r.n(n);o.a},"0d65":function(t,e,r){"use strict";r.r(e);var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"login"}},[r("div",{staticClass:"container-fluid"},[r("Header"),r("div",{staticClass:"login",style:{marginTop:t.initPosition()}},[t._m(0),r("div",{staticClass:"col-6 text-center pr-7"},[r("div",{staticClass:"main-title"},[t._v("登录")]),r("div",{staticClass:"second-title"},[t._v("砺英网 | 通行证")]),r("div",{staticClass:"row mt-6"},[r("div",{staticClass:"center-block",staticStyle:{width:"300px"}},[r("div",{staticClass:"row text-center"},[r("el-form",{ref:"form",staticClass:"mt-3",attrs:{model:t.form,rules:t.rules,"show-message":!0}},[r("el-form-item",{attrs:{prop:"phone"}},[r("el-input",{attrs:{placeholder:"你的手机号",maxlength:"11"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),r("el-form-item",{attrs:{prop:"pwd"}},[r("el-input",{attrs:{placeholder:"输入密码","show-password":"",maxlength:"20"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("form")}},model:{value:t.form.pwd,callback:function(e){t.$set(t.form,"pwd",e)},expression:"form.pwd"}})],1)],1)],1),r("div",{staticClass:"row mt-6 mb-3"},[r("div",{staticClass:"btn btn-block login-btn",on:{click:function(e){return t.login("form")}}},[t._v("登录")])]),t._m(1),t._m(2)])])])]),r("Footer")],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-6 pl-0"},[n("img",{attrs:{src:r("9411"),height:"560"}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("a",{staticClass:"pull-left reg-pwd",attrs:{href:"reg-student.html"}},[t._v("注册新账号")]),r("a",{staticClass:"pull-right reg-pwd",staticStyle:{color:"#999999"},attrs:{href:"forget-pwd.html"}},[t._v("忘记密码？")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row mt-6"},[r("div",{staticClass:"col-4"},[r("hr",{staticClass:"mb-0 mt-4"})]),r("div",{staticClass:"col-4"},[r("i",{staticClass:"iconfont iconbangdingweixin",staticStyle:{color:"#32C25A"}}),r("span",{staticClass:"wechat-login"},[t._v("微信登录")])]),r("div",{staticClass:"col-4"},[r("hr",{staticClass:"mb-0 mt-4"})])])}],i=r("a748"),s=r("e819"),l=r("3595"),c={name:"login",components:{Header:i["a"],Footer:s["a"]},mounted(){localStorage.clear(),null!==Object(l["a"])("type")&&(this.loginType=Object(l["a"])("type")),this.redirectUrl=Object(l["a"])("redirectUrl")},data(){var t=(t,e,r)=>{if(""===e)r(new Error("请输入手机号"));else{if(""!==this.form.phone){var n=/^1([38]\d|5[0-35-9]|7[3678])\d{8}$/;n.test(this.form.phone)||r(new Error("手机号格式不正确"))}r()}},e=(t,e,r)=>{this.form.phone=e.replace(/[^\d]/g,""),r()},r=(t,e,r)=>{""===e&&r(new Error("请输入密码 "));var n=/^(\w){6,20}$/;n.exec(e)||r(new Error("只能输入6-20个字母、数字、下划线 ")),r()};return{winWidth:window.innerWidth,form:{phone:"",pwd:""},loginType:"lying",redirectUrl:"",rules:{phone:[{min:11,max:11,message:"手机号长度应为11位",trigger:"blur"},{validator:t,trigger:"blur"},{validator:e,trigger:"change"}],pwd:[{validator:r,trigger:"change"},{validator:r,trigger:"blur"}]}}},methods:{initPosition(){let t=0;return t=(window.innerHeight-560)/2,t+"px"},sizeChange(t){return this.winWidth*t/1344+"px"},login(t){let e=this;e.$refs[t].validate(t=>{if(!t)return!1;this.$http.post("/user/login",{phone:this.form.phone,password:this.form.pwd},t=>{if(t.success){1===t.data.unreadStatus?localStorage.setItem("unreadStatus","true"):localStorage.setItem("unreadStatus","false"),localStorage.setItem("token",t.data.token),localStorage.setItem("userType",t.data.userType);var r=new FormData;r.append("phone",e.form.phone),r.append("password",e.form.pwd),e.$http.snspost("/member/lyinglogin",r,r=>{console.log(r),localStorage.setItem("snsNo",r.data.data),"lying"===e.loginType?"0"===t.data.userType?window.location="personal-main.html":window.location="assistant-main.html":"sns"===e.loginType&&window.open(e.$http.snsUrl+"/member/login?snsNo="+window.btoa(window.encodeURIComponent(localStorage.getItem("snsNo")))+"&redirectUrl="+e.redirectUrl,"_self")})}else e.$alert(t.errorMsg,"提示",{confirmButtonText:"确定"})})})}}},d=c,u=(r("010b"),r("e3e6"),r("2877")),p=Object(u["a"])(d,o,a,!1,null,"628dda01",null),f=p.exports,m=(r("7378"),r("3a10"),r("751a"));n["default"].prototype.$http=m["a"],new n["default"]({render:t=>t(f)}).$mount("#login")},13:function(t,e,r){t.exports=r("0d65")},"70b5":function(t,e,r){},beec:function(t,e,r){},e3e6:function(t,e,r){"use strict";var n=r("beec"),o=r.n(n);o.a}});
//# sourceMappingURL=login.8d6aebc9.js.map