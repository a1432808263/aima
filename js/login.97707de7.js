(function(t){function e(e){for(var n,s,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)s=i[d],o[s]&&f.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,i=1;i<r.length;i++){var l=r[i];0!==o[l]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={login:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(){return Promise.resolve()},s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;a.push([11,"chunk-vendors","chunk-common"]),r()})({"0d65":function(t,e,r){"use strict";r.r(e);var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"login"}},[r("div",{staticClass:"container-fluid"},[r("Header"),r("hr",{staticStyle:{border:"none"}}),r("div",{staticClass:"login"},[t._m(0),r("div",{staticClass:"col-6 text-center pr-7"},[r("div",{staticClass:"main-title"},[t._v("登录")]),r("div",{staticClass:"second-title"},[t._v("砺英网 | 通行证")]),r("div",{staticClass:"row mt-6"},[r("div",{staticClass:"center-block",staticStyle:{width:"300px"}},[r("div",{staticClass:"row text-center"},[r("el-form",{ref:"form",staticClass:"mt-3",attrs:{model:t.form,rules:t.rules,"show-message":!0}},[r("el-form-item",{attrs:{prop:"phone"}},[r("el-input",{attrs:{placeholder:"你的手机号",maxlength:"11"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),r("el-form-item",{attrs:{prop:"pwd"}},[r("el-input",{attrs:{placeholder:"输入密码","show-password":"",maxlength:"20"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("form")}},model:{value:t.form.pwd,callback:function(e){t.$set(t.form,"pwd",e)},expression:"form.pwd"}})],1)],1)],1),r("div",{staticClass:"row mt-6 mb-3"},[r("div",{staticClass:"btn btn-block login-btn",on:{click:function(e){return t.login("form")}}},[t._v("登录")])]),t._m(1),t._m(2)])])])]),r("Footer")],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-6 pl-0"},[n("img",{attrs:{src:r("9411"),height:"560"}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("a",{staticClass:"pull-left reg-pwd",attrs:{href:"reg-student.html"}},[t._v("注册新账号")]),r("a",{staticClass:"pull-right reg-pwd",staticStyle:{color:"#999999"},attrs:{href:"forget-pwd.html"}},[t._v("忘记密码？")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row mt-6"},[r("div",{staticClass:"col-4"},[r("hr",{staticClass:"mb-0 mt-4"})]),r("div",{staticClass:"col-4"},[r("i",{staticClass:"iconfont iconbangdingweixin",staticStyle:{color:"#32C25A"}}),r("span",{staticClass:"wechat-login"},[t._v("微信登录")])]),r("div",{staticClass:"col-4"},[r("hr",{staticClass:"mb-0 mt-4"})])])}],s=r("a748"),i=r("e819"),l={name:"login",components:{Header:s["a"],Footer:i["a"]},mounted(){localStorage.clear()},data(){var t=(t,e,r)=>{if(""===e)r(new Error("请输入手机号"));else{if(""!==this.form.phone){var n=/^1([38]\d|5[0-35-9]|7[3678])\d{8}$/;n.test(this.form.phone)||r(new Error("手机号格式不正确"))}r()}},e=(t,e,r)=>{this.form.phone=e.replace(/[^\d]/g,""),r()},r=(t,e,r)=>{""===e&&r(new Error("请输入密码 "));var n=/^(\w){6,20}$/;n.exec(e)||r(new Error("只能输入6-20个字母、数字、下划线 ")),r()};return{form:{phone:"",pwd:""},rules:{phone:[{min:11,max:11,message:"手机号长度应为11位",trigger:"blur"},{validator:t,trigger:"blur"},{validator:e,trigger:"change"}],pwd:[{validator:r,trigger:"change"},{validator:r,trigger:"blur"}]}}},methods:{login(t){let e=this;e.$refs[t].validate(t=>{if(!t)return!1;this.$http.post("/user/login",{phone:this.form.phone,password:this.form.pwd},t=>{t.success?(localStorage.setItem("token",t.data.token),localStorage.setItem("userType",t.data.userType),"0"===t.data.userType?window.location="personal-main.html":window.location="assistant-main.html"):e.$alert(t.errorMsg,"提示",{confirmButtonText:"确定"})})})}}},c=l,u=(r("7e19"),r("e3e6"),r("2877")),d=Object(u["a"])(c,o,a,!1,null,"d5074cba",null),f=d.exports,p=(r("7378"),r("3a10"),r("751a"));n["default"].prototype.$http=p["a"],new n["default"]({render:t=>t(f)}).$mount("#login")},11:function(t,e,r){t.exports=r("0d65")},4807:function(t,e,r){},"7e19":function(t,e,r){"use strict";var n=r("4807"),o=r.n(n);o.a},beec:function(t,e,r){},e3e6:function(t,e,r){"use strict";var n=r("beec"),o=r.n(n);o.a}});
//# sourceMappingURL=login.97707de7.js.map