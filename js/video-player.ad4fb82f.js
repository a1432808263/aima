(function(t){function e(e){for(var n,s,l=e[0],r=e[1],c=e[2],d=0,p=[];d<l.length;d++)s=l[d],a[s]&&p.push(a[s][0]),a[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);m&&m(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,l=1;l<o.length;l++){var r=o[l];0!==a[r]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},a={"video-player":0},i=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(){return Promise.resolve()},s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var m=r;i.push([38,"chunk-vendors","chunk-common"]),o()})({38:function(t,e,o){t.exports=o("6166")},6166:function(t,e,o){"use strict";o.r(e);var n=o("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"container-fluid",staticStyle:{padding:"unset"},attrs:{id:"head_part"}},[n("Header",{attrs:{img:"",school:"Go语言实战抽奖系统"}})],1),n("div",{staticClass:"row pt-3",staticStyle:{"border-top":"1px solid #666"},attrs:{id:"video_part"}},[n("div",{staticClass:"col-xs-12 col-md-6 col-md-offset-1 pt-2 pr-0"},[t.showflg?n("div",{attrs:{id:"vid"}}):t._e(),n("div",{attrs:{id:"block-E"}}),n("div",{staticClass:"col-md-10 pl-0",staticStyle:{"margin-top":"15px"}},[n("h1",[t._v(t._s(t.materialName))])]),n("div",{staticClass:"material-src col-md-12 pl-0 pr-0"},[t._m(0),n("span",{staticClass:"pull-left"},[t._v("发布时间:2019-03-09")]),t._m(1),n("span",{staticClass:"pull-right"},[n("i",{staticClass:"el-icon-video-camera"}),t._v("播放数:"),n("span",{staticStyle:{color:"#00be06"}},[t._v(t._s(t.vPlayCount))])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12 col-md-12 p-2 pt-7"},[n("div",{staticClass:"pointer font-large font-bold mt-4 comment-title",attrs:{id:"comment_area"}},[t._v("全部评论 ("+t._s(t.commentList.length)+")")]),n("div",{staticClass:"col-xs-12 col-md-12 p-2 mt-6 mb-6"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.myComment,expression:"myComment"}],staticClass:"el-textarea__inner",staticStyle:{"min-height":"200px"},attrs:{placeholder:"我来说点什么..."},domProps:{value:t.myComment},on:{input:function(e){e.target.composing||(t.myComment=e.target.value)}}}),n("div",{staticClass:"comment-btn pointer",on:{click:t.submitComment}},[n("span",[t._v("发布")])])]),n("div",{staticStyle:{margin:"10px",padding:"10px"}},[0==t.commentList.length?n("p",{staticClass:"text-center"},[n("img",{staticStyle:{width:"100%"},attrs:{src:o("306e")}}),t._v("暂无评论，我来发表第一篇评论！")]):n("div",t._l(t.commentList,function(e,o){return n("div",{key:o},[n("div",{staticClass:"comment-per"},[n("div",{staticClass:"col-md-1"},[n("img",{staticStyle:{width:"54px","border-radius":"50%",height:"54px"},attrs:{src:e.userPhotoUrl}})]),n("div",{staticClass:"comment col-md-11"},[null===e.commentId||""===e.commentId?n("div",{staticClass:"font-bold"},[t._v("\n                      "+t._s(e.discussantName)+" "),n("span",[t._v(t._s(e.commentTime))]),n("div",{staticClass:"pointer",staticStyle:{float:"right","margin-right":"20px"}},[n("a",{on:{click:function(o){return t.showFatherCommentArea(e)}}},[n("i",{staticClass:"icondazhongicon05 iconfont font-bold font-large",style:{color:e.iconColor}}),t._v(" "),n("span",{style:{color:e.iconColor,fontWeight:"300",fontSize:"12px"}},[t._v("回复")])])])]):t._e(),null===e.commentId||""===e.commentId?n("p",{domProps:{innerHTML:t._s(e.content)}},[e.stepName?n("span",[t._v("#"+t._s(e.stepName))]):t._e(),e.materialName?n("span",[t._v("#"+t._s(e.materialName))]):t._e(),t._v("\n                      "+t._s(e.content)+"\n                    ")]):t._e(),t.commentReplyFlg?n("div",{staticClass:"mt-3 mb-3"},[e.newCommentReply?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newCommentReplyContent,expression:"item.newCommentReplyContent"}],staticClass:"el-textarea__inner",staticStyle:{"min-height":"100px"},attrs:{placeholder:e.place},domProps:{value:e.newCommentReplyContent},on:{input:function(o){o.target.composing||t.$set(e,"newCommentReplyContent",o.target.value)}}}):t._e(),e.newCommentReply?n("div",{staticClass:"new-reply-btn pointer",on:{click:function(o){return t.submitFatherComment(e)}}},[n("span",[t._v("发布")])]):t._e()]):t._e(),e.reply.length>0?n("div",{staticClass:"reply-list"},[n("list",{attrs:{comment:e},on:{submitSonComment:t.submitSonComment}})],1):t._e()])])])}),0)])])])]),n("div",{staticClass:"col-xs-12 col-md-4 pt-2 pr-0 play-list ml-6"},t._l(t.videoList,function(e,a){return n("div",{key:a,staticClass:"play-item col-md-12 col-xs-12",on:{click:function(o){return t.changeVideo(e.materialUrl,e.id,e)}}},[n("div",{staticClass:"mod-left col-md-6 pr-0 pl-0"},[n("img",{staticClass:"play-img",style:{height:t.sizeChange(118,"height")},attrs:{src:o("9f3d")}}),n("i",{directives:[{name:"show",rawName:"v-show",value:e.materialUrl===t.vUrl,expression:"video.materialUrl === vUrl"}],staticClass:"img-border"})]),n("div",{staticClass:"mod-right pull-left col-md-6"},[n("h3",{class:[e.materialUrl===t.vUrl?"playing-color":""]},[t._v(t._s(e.materialName))]),n("span",{staticClass:"row pull-left play-src"},[t._v("爱码学院")]),e.materialUrl!==t.vUrl?n("span",{staticClass:"row pull-left"},[n("i",{staticClass:"el-icon-pie-chart font-bold"}),n("span",{staticClass:"play-date"},[t._v("2016-03-09")])]):n("span",{staticClass:"row pull-left playing-color"},[n("i",{staticClass:"el-icon-video-play font-bold playing-color"}),n("span",{staticClass:"playing-color"},[t._v("播放中")])])])])}),0)])])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"pull-left",staticStyle:{"margin-left":"unset"}},[t._v("来源:"),o("i",{staticClass:"iconfont iconlogo"})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"pull-right pointer"},[o("a",{attrs:{href:"#comment_area"}},[o("i",{staticClass:"el-icon-chat-dot-round"}),t._v("评论")])])}],s=o("10df"),l=o("6bec"),r=o("1157"),c=o.n(r),m={name:"app",components:{Header:s["a"],List:l["a"]},mounted(){let t=this;window.addEventListener("beforeunload",e=>t.setLearningTime(e)),this.initData()},destroyed(){let t=this;window.removeEventListener("beforeunload",e=>t.setLearningTime(e))},data(){return{vdHeight:"1",bdHeight:"",commentReplyFlg:!1,marginTop:"",materialId:"",vUrl:"",vPlayer:null,vPlayCount:0,showflg:!0,videoList:[],docList:[],myComment:"",commentList:[],materialName:"",winWidth:window.innerWidth,winHeight:window.innerHeight}},methods:{initData:function(){let t=this;t.materialId=localStorage.getItem("materialId"),t.materialName=localStorage.getItem("materialName"),this.vUrl=localStorage.getItem("materialVideo"),this.showflg=!0,c()("#block-E").css({"background-color":"#292929",width:.5*t.winWidth+"px",height:this.sizeChange(48,"height")}),c()("#vid").css({height:"438px"}),t.vPlayer=polyvObject("#vid").videoPlayer({wrap:"#vid",width:.5*t.winWidth+"px",height:"439px",vid:t.vUrl}),t.getVideoPlayCount(t.vUrl),t.projectId=localStorage.getItem("projectId"),t.$http.post("/doproject/materialsInfoByProject",{sourceType:0,projectId:t.projectId},e=>{if(e.success)for(var o=0;o<e.data.length;o++)1===e.data[o].materialType?t.videoList.push(e.data[o]):0===e.data[o].materialType&&t.docList.push(e.data[o])}),t.$http.post("/doproject/discussionTreeInfo",{projectId:localStorage.getItem("projectId")},e=>{e.success&&(t.commentList=e.data)})},loadDisscussionTree(){let t=this;t.$http.post("/doproject/discussionTreeInfo",{projectId:localStorage.getItem("projectId")},e=>{e.success&&(t.commentList=e.data)})},changeVideo(t,e,o){let n=this;n.showflg=!1;let a=new Date;a=n.getNowTime(a);let i={learnContent:n.materialId,operationTime:a,learningState:1};n.$http.post("/doproject/recordLearningTime",i,s=>{s.success&&n.$nextTick(()=>{n.vUrl=t,n.materialId=e,n.materialName=o.materialName,a=new Date,a=n.getNowTime(a),i={learnContent:n.materialId,operationTime:a,learningState:0},n.$http.post("/doproject/recordLearningTime",i,t=>{t.success&&(n.showflg=!0,setTimeout(function(){c()("#vid").css({height:"438px"}),n.vPlayer=polyvObject("#vid").videoPlayer({wrap:"#vid",width:.5*n.winWidth+"px",height:"439px",vid:n.vUrl}),n.getVideoPlayCount(n.vUrl)}))})})})},submitComment(){let t=this;if(null===t.myComment||void 0===t.myComment||""===t.myComment)return this.$message("内容不能为空！"),!1;let e=new Date;e=t.getNowTime(e),t.$http.post("/doproject/submitDiscussion",{commentTime:e,content:t.myComment,projectId:localStorage.getItem("projectId"),commentId:"",materialId:t.materialId},e=>{t.$message("发布成功"),t.myComment=null,t.loadDisscussionTree()})},submitSonComment(t){if(null===t.newReplyContent||void 0===t.newReplyContent||""===t.newReplyContent)return this.$message("内容不能为空！"),!1;let e=this,o=new Date;o=e.getNowTime(o),e.$http.post("/doproject/submitDiscussion",{commentTime:o,content:t.newReplyContent,projectId:localStorage.getItem("projectId"),commentId:t.commentId,materialId:e.materialId},t=>{e.$message("发布成功"),e.loadDisscussionTree()})},submitFatherComment(t){if(null===t.newCommentReplyContent||void 0===t.newCommentReplyContent||""===t.newCommentReplyContent)return this.$message("内容不能为空！"),!1;let e=this,o=new Date;o=e.getNowTime(o),e.$http.post("/doproject/submitDiscussion",{commentTime:o,content:t.newCommentReplyContent,projectId:localStorage.getItem("projectId"),commentId:t.id,materialId:e.materialId},t=>{e.$message("发布成功"),e.loadDisscussionTree()})},showFatherCommentArea(t){this.commentReplyFlg=!1,null===t.newCommentReply||void 0===t.newCommentReply?(t.newCommentReply=!0,t.place="回复"+t.discussantName,t.newCommentReplyContent=null,t.iconColor="#6612cf"):(t.newCommentReply=!t.newCommentReply,!1===t.newCommentReply?t.iconColor="black":t.iconColor="#6612cf"),this.commentReplyFlg=!0},getNowTime(t){var e=t.getFullYear()+"-",o=t.getMonth()+1<10?"0"+(t.getMonth()+1)+"-":t.getMonth()+1+"-",n=t.getDate()<10?"0"+t.getDate()+" ":t.getDate()+" ",a=t.getHours()<10?"0"+t.getHours()+":":t.getHours()+":",i=t.getMinutes()<10?"0"+t.getMinutes()+":":t.getMinutes()+":",s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();let l=e+o+n+a+i+s;return l},getVideoPlayCount(t){let e=this,o=Date.parse(new Date);var n="dr=this_year&period=monthly&ptime="+o+"&vid="+t+"TkSZYq88An";n=e.$sha(n),n=n.toLocaleUpperCase(),e.$axios({method:"GET",url:"http://api.polyv.net/v2/videoview/56c20fd00b?ptime="+o+"&sign="+n+"&dr=this_year&period=monthly&vid="+t,headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(t=>{let o=0;for(var n=0;n<t.data.data.length;n++)o+=t.data.data[n].pcVideoView;e.vPlayCount=o})},setLearningTime(t){let e=this,o=new Date;o=e.getNowTime(o);let n={learnContent:e.materialId,operationTime:o,learningState:1};n=JSON.stringify(n),c.a.ajax({url:e.$baseUrl+"/doproject/recordLearningTime",type:"post",async:!1,data:n,contentType:"application/json",beforeSend:function(t){t.setRequestHeader("token",localStorage.getItem("token"))},success:function(t){}})},sizeChange(t,e){return"width"===e?this.winWidth*t/1344+"px":"height"===e?this.winHeight*t/739+"px":void 0}}},d=m,p=(o("99c2"),o("2877")),u=Object(p["a"])(d,a,i,!1,null,"250f91ec",null),h=u.exports,g=(o("7378"),o("3a10"),o("16b4"),o("346c"),o("1e3b"),o("87c5"),o("4dcb"),o("751a")),v=o("bc3a"),y=o.n(v),f=o("52f1"),C=o("6199"),w=o.n(C);n["default"].prototype.$sha=w.a,n["default"].prototype.$axios=y.a,n["default"].prototype.$http=g["a"],n["default"].prototype.$baseUrl=f["a"],new n["default"]({render:t=>t(h)}).$mount("#app")},8144:function(t,e,o){},"99c2":function(t,e,o){"use strict";var n=o("8144"),a=o.n(n);a.a},"9f3d":function(t,e,o){t.exports=o.p+"img/java-video.155c14e6.png"}});
//# sourceMappingURL=video-player.ad4fb82f.js.map