(function(t){function e(e){for(var a,n,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)n=r[d],i[n]&&p.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},i={notice:0},o=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.e=function(){return Promise.resolve()},n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([15,"chunk-vendors","chunk-common"]),s()})({15:function(t,e,s){t.exports=s("6e72")},"647d":function(t,e,s){},"6e72":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"notice"}},[s("div",{staticClass:"container-fluid",staticStyle:{padding:"0px 0px 0px 0px"}},[s("Header",{attrs:{noticeIs:t.noticeIs,img:"",school:"Go语言实战抽奖系统"}})],1),s("div",{staticClass:"col-md-10 col-md-offset-1 mt-6"},[s("el-tabs",{directives:[{name:"show",rawName:"v-show",value:t.showNotice,expression:"showNotice"}],staticClass:"mb-4",attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{name:"project"}},[s("div",{staticStyle:{"font-size":"20px","margin-top":"20px"},attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-tickets"}),t._v(" 消息列表")]),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.materialTypes.length,expression:"materialTypes.length === 0"}]},[t._v("暂无消息")]),t._l(t.materialTypes,function(e,a){return s("div",{key:a,staticClass:"row"},[s("div",{staticClass:"col-md-12 col-xs-12 pull-left",staticStyle:{"margin-top":"10px"}},[s("div",{staticClass:"java_tit mb-4"},[s("span",[t._v(t._s(e.kind))]),s("span",{staticClass:"pull-right",staticStyle:{color:"#000000",background:"#ffffff","margin-top":"1px"}},[t._v("\n                  "+t._s(e.time)+"\n")])]),s("div",{staticClass:"row pl-4 pr-5"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.status&&""!==e.status,expression:"item.status&&item.status!==''"}],staticClass:"pull-left java_color"},[t._v("["+t._s(e.status)+"]")]),s("span",{staticClass:"ml-3"},[t._v(t._s(e.content))]),s("a",{directives:[{name:"show",rawName:"v-show",value:"系统公告"===e.kind,expression:"item.kind === '系统公告'"}],staticClass:"pull-right font-small",on:{click:function(s){return t.showStail(e)}}},[t._v("查看详情")]),s("a",{directives:[{name:"show",rawName:"v-show",value:"系统公告"!==e.kind&&"组队通知"!==e.kind,expression:"item.kind !== '系统公告' && item.kind !== '组队通知'"}],staticClass:"pull-right font-small",on:{click:function(s){return t.showStail(e)}}},[t._v("去查看")])])])])})],2)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showNotice,expression:"!showNotice"}],domProps:{innerHTML:t._s(t.htmlContent)}})],1)])},o=[],n=s("f6f6"),r=n["a"],l=(s("d88f"),s("807d"),s("2877")),c=Object(l["a"])(r,i,o,!1,null,"791c7874",null),u=c.exports,d=(s("7378"),s("16b4"),s("346c"),s("1e3b"),s("3a10"),s("87c5"),s("0cb1"),s("751a"));a["default"].prototype.$http=d["a"],new a["default"]({render:t=>t(u)}).$mount("#notice")},"764c":function(t,e,s){},"807d":function(t,e,s){"use strict";var a=s("764c"),i=s.n(a);i.a},d88f:function(t,e,s){"use strict";var a=s("647d"),i=s.n(a);i.a},f6f6:function(t,e,s){"use strict";(function(t){var a=s("10df");e["a"]={name:"notice",components:{Header:a["a"]},mounted(){this.initEvent(),this.initData()},data(){return{winWidth:window.innerWidth,activeName:"project",materialTypes:[],curPage:1,total:10,pageSize:20,dataChanged:!1,noticeIs:!1,showNotice:!1,htmlContent:""}},methods:{initEvent:function(){let e=this;"false"===localStorage.getItem("unreadStatus")?e.noticeIs=!1:e.noticeIs=!0,e.winWidth=t("body").width(),window.onresize=function(){e.winWidth=t("body").width()}},initData:function(){-1!==window.location.href.indexOf("?")?(document.title="公告详情",this.htmlContent=localStorage.getItem("urlContent"),this.showNotice=!1):(this.showNotice=!0,this.loadProjectinfo())},loadProjectinfo(){let t=this;t.materialTypes=[],this.$http.post("/doproject/noticeInfo",{},e=>{if(console.log(e),e.success){for(let s of e.data)t.materialTypes.push({id:s.id,kind:"系统公告",time:s.createTime,content:s.notice,url:s.url,status:""});this.$http.post("/doproject/pushMessageInfo",{},e=>{if(console.log(e),e.success){let o=0;for(let n of e.data){var s="未读";1===n.status&&(s="已读",o++);var a="",i="";1===n.messageType?(a="提交成果物",i="0"===localStorage.getItem("userType")?"task-list.html":"assistant-task-list.html"):2===n.messageType?(a="点评成果物",i="task-list.html"):3===n.messageType?(a="系统点评",i="task-list.html"):4===n.messageType?(a="阶段报告",i="growth-locus.html"):5===n.messageType?(a="组队通知",s=""):(a="通知",i=""),e.data.length===o&&(localStorage.setItem("unreadStatus","false"),t.noticeIs=!1),t.materialTypes.push({id:n.id,kind:a,time:n.createTime,content:n.message,url:i,status:s,stepId:n.stepId,teamId:n.teamId})}}})}})},sizeChange(t){return this.winWidth*t/1920+"px"},refresh(){this.dataChanged=!0,this.$nextTick(()=>{this.dataChanged=!1})},gotoPage(t){},changeRowNum(t){},showStail(t){console.log(t),"提交成果物"===t.kind&&"1"===localStorage.getItem("userType")?this.$http.post("/assistant/jumpMessageDetail",{teamId:t.teamId},e=>{return console.log(e),window.location=t.url+"?teamId="+t.teamId+"&currentStepId="+t.stepId+"&projectId="+e.data.projectId+"&facultyMarjorId="+e.data.facultyMarjorId,!1}):"系统公告"!==t.kind&&"未读"===t.status?this.$http.post("/doproject/updateMessageStatus",{id:t.id},e=>{console.log(e),window.location=t.url}):"系统公告"===t.kind?(document.title="公告详情",this.htmlContent=t.url,this.showNotice=!1):"阶段报告"===t.kind?window.location=t.url:""===t.url||(window.location=t.url)}}}}).call(this,s("1157"))}});
//# sourceMappingURL=notice.261a08f0.js.map