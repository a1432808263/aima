(function(t){function e(e){for(var i,l,n=e[0],r=e[1],c=e[2],d=0,m=[];d<n.length;d++)l=n[d],s[l]&&m.push(s[l][0]),s[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,n=1;n<a.length;n++){var r=a[n];0!==s[r]&&(i=!1)}i&&(o.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},s={"team-my":0},o=[];function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(){return Promise.resolve()},l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=r;o.push([36,"chunk-vendors","chunk-common"]),a()})({36:function(t,e,a){t.exports=a("b927")},"6ba4":function(t,e,a){"use strict";var i=a("c2c0"),s=a.n(i);s.a},b927:function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container-fluid",staticStyle:{padding:"unset"}},[a("Header",{attrs:{school:"东北大学"}}),t.projectInfo?a("ProjectTitle",{attrs:{data:t.projectInfo}}):t._e(),a("TeamTab",{staticStyle:{display:"none"},attrs:{data:t.tabData,"active-index":1,type:1},on:{"save-team":t.saveTeam}}),a("div",{staticClass:"container team-container"},[a("div",{staticClass:"bar team-title"},[a("div",{staticClass:"logo"}),a("div",{staticClass:"name"},[t.teamInfo.teamName?a("span",[t._v(t._s(t.teamInfo.teamName))]):t._e()]),a("el-button",{staticClass:"pull-right mt-4",attrs:{type:"primary"},on:{click:t.saveTeam}},[t._v("完成组队")]),a("el-button",{staticClass:"pull-right mt-4",on:{click:t.deleteTeam}},[t._v("解散团队")])],1),a("div",{staticClass:"main"},[t._m(0),a("div",{staticClass:"member-list"},[t._l(t.teamInfo.memberList,function(e){return a("div",{key:e.userCode,staticClass:"box member-box"},[a("div",{staticClass:"model"}),a("div",{staticClass:"action"},[a("i",{staticClass:"iconfont iconjujue",on:{click:function(a){return t.deleteMember(e.userCode,e.teamRole)}}}),a("span",[t._v("移出团队")])]),a("div",{staticClass:"name"},[t._v(t._s(e.userName))]),a("div",{staticClass:"position"},[t._v(t._s("leader"===e.teamRole?"队长":"队员"))]),a("div",{staticClass:"head-portrait"})])}),a("div",{staticClass:"box add-box",on:{click:t.inviteOthers}},[a("i",{staticClass:"iconfont iconyaoqinghaoyou"}),a("span",[t._v("邀请加入")])])],2)]),a("div",{staticClass:"apply"},[t._m(1),a("div",{staticClass:"member-list apply-list"},t._l(t.teamInfo.applyList,function(e){return a("div",{key:e.userCode,staticClass:"box member-box apply-box"},[a("div",{staticClass:"action"},[a("i",{staticClass:"iconfont iconduihao",on:{click:function(a){return t.agreeMember(e.userCode)}}}),a("i",{staticClass:"iconfont iconjujue",on:{click:function(a){return t.rejectMember(e.userCode)}}})]),a("div",{staticClass:"name"},[t._v(t._s(e.userName))]),a("div",{staticClass:"head-portrait"})])}),0)])])],1),a("el-dialog",{attrs:{visible:t.deleteDialogVisible,width:"468px",center:""},on:{"update:visible":function(e){t.deleteDialogVisible=e}}},[a("div",{staticClass:"center-block tip-content"},[t._v("\n        是否确定解散队伍\n      ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"140px"},attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("确定")]),a("el-button",{staticStyle:{width:"140px"},attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取消")])],1)]),a("el-dialog",{attrs:{visible:t.confirmDialogVisible,title:"是否确定完成组队并开始项目？",width:"468px",center:""},on:{"update:visible":function(e){t.confirmDialogVisible=e}}},[a("div",{staticClass:"confirm-content"},t._l(t.teamInfo.memberList,function(e){return a("div",{key:e.userCode,staticClass:"box member-box"},[a("div",{staticClass:"name"},[t._v(t._s(e.userName))]),a("div",{staticClass:"position"},[t._v(t._s("leader"===e.teamRole?"队长":"队员"))]),a("div",{staticClass:"head-portrait"})])}),0),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"140px"},attrs:{type:"primary"},on:{click:t.completeTeam}},[t._v("确定")]),a("el-button",{staticStyle:{width:"140px"},attrs:{type:"primary"},on:{click:function(e){t.confirmDialogVisible=!1}}},[t._v("取消")])],1)]),a("el-dialog",{attrs:{visible:t.deleteDialogVisible,width:"468px",center:""},on:{"update:visible":function(e){t.deleteDialogVisible=e}}},[a("div",{staticClass:"center-block tip-content"},[t._v("\n        是否确定解散队伍\n      ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"140px"},attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("确定")]),a("el-button",{staticStyle:{width:"140px"},attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取消")])],1)]),a("el-dialog",{attrs:{visible:t.inviteDialogVisible,title:"请选择",width:"468px",center:""},on:{"update:visible":function(e){t.inviteDialogVisible=e}}},[a("div",[a("el-select",{staticStyle:{width:"40%"},attrs:{clearable:"",placeholder:"请选择班级"},model:{value:t.classKey,callback:function(e){t.classKey=e},expression:"classKey"}},t._l(t.classData,function(t){return a("el-option",{key:t.classId,attrs:{label:t.className,value:t.classId}})}),1),a("el-input",{staticStyle:{width:"35%","margin-left":"5%"},attrs:{placeholder:"姓名"},model:{value:t.nameKey,callback:function(e){t.nameKey=e},expression:"nameKey"}}),a("el-button",{staticStyle:{width:"70px"},attrs:{type:"primary"},on:{click:t.inviteOthers}},[t._v("搜索")])],1),a("div",{staticClass:"confirm-content"},t._l(t.invitableMembersInfo,function(e){return a("div",{key:e.userCode,staticClass:"box member-box"},[a("div",{staticClass:"name"},[t._v(t._s(e.userRealName))]),a("div",{staticClass:"position",on:{click:function(a){return t.inviteMember(e.userCode)}}},[t._v("邀请加入")]),a("div",{staticClass:"head-portrait"})])}),0),t.invitableMembersInfo?a("div",[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","hide-on-single-page":!0,total:t.totalMembers,"page-size":t.pageSize,"current-page":t.currPage,"page-count":t.pageCount},on:{"current-change":t.paginationChange}})],1):t._e()])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-title"},[a("div",{staticClass:"vertical"}),a("div",{staticClass:"title"},[t._v("成员列表")]),a("div",{staticClass:"line"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply-title"},[a("div",{staticClass:"vertical"}),a("div",{staticClass:"title"},[t._v("申请列表")]),a("div",{staticClass:"line"})])}],l=a("10df"),n=a("c80e"),r=a("d148"),c={components:{Header:l["a"],ProjectTitle:n["a"],TeamTab:r["a"]},name:"app",mounted(){this.loadData()},data(){return{form:{name:"某某某的团队"},centerDialogVisible:!1,deleteDialogVisible:!1,confirmDialogVisible:!1,inviteDialogVisible:!1,searchKey:"",tabData:[{name:"选择项目",url:"course-detail.html"},{name:"组队",url:"team-search.html"},{name:"任务裁剪",url:""},{name:"人员管理",url:""}],teamData:[],teamInfo:null,projectInfo:null,invitableMembersInfo:null,classData:[],classKey:null,nameKey:null,currPage:1,pageSize:10,pageCount:0,totalMembers:0}},methods:{loadData(){this.loadProjectInfo(),this.loadTeamList(),this.loadInvitableMembers(),this.loadClassData()},loadTeamList(){let t=this;this.$http.post("/teambuild/queryteaminfoforleader",{},e=>{e.success&&(t.teamInfo=e.data)})},loadProjectInfo(){let t=this,e=localStorage.getItem("projectId"),a=localStorage.getItem("courseId");this.$http.post("/teambuild/queryprojectinfo",{projectId:e,courseId:a},e=>{e.success&&(t.projectInfo=e.data,t.projectInfo.courseName=localStorage.getItem("courseName"))})},loadInvitableMembers(){let t=this;t.$http.post("/teambuild/queryinvitablemember",{grade:localStorage.getItem("userEnterYear"),classId:t.classKey,userName:t.nameKey,currPage:t.currPage,pageSize:t.pageSize},e=>{e.success&&(t.pageCount=e.data.totalPageNum,t.totalMembers=e.data.totalCount,t.invitableMembersInfo=e.data.data,console.log(t.invitableMembersInfo))})},loadClassData(){let t=this;t.$http.post("/user/queryclass",{userEnterYear:localStorage.getItem("userEnterYear")},e=>{t.classData=e.data})},deleteTeam(){let t=this;this.$confirm("是否确定解散队伍?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$http.post("/teambuild/dismissteam",{teamId:t.teamInfo.teamId},t=>{t.success&&(this.$message("已删除"),window.location="team-search.html")})})},saveTeam(){this.confirmDialogVisible=!0},agreeMember(t){let e=this;this.$http.post("/teambuild/agreerefuseinvitecaptain",{teamId:e.teamInfo.teamId,joinStatus:1,userCode:t},t=>{t.success&&(e.$message("已同意成员申请"),e.loadTeamList())})},rejectMember(t){let e=this;this.$http.post("/teambuild/agreerefuseinvitecaptain",{teamId:e.teamInfo.teamId,joinStatus:-1,userCode:t},t=>{t.success&&(e.$message("已拒绝成员申请"),e.loadTeamList())})},completeTeam(){let t=this;if(t.teamInfo.memberList.length<t.projectInfo.minCount||t.teamInfo.memberList.length>t.projectInfo.maxCount)return t.$alert("团队人数不符合项目要求！","提示",{confirmButtonText:"确定"}),!1;this.$http.post("/teambuild/startproject",{teamId:t.teamInfo.teamId},t=>{t.success&&(window.location="task-list.html")})},inviteOthers(){let t=this;1!==t.currPage?(t.currPage=1,t.loadInvitableMembers(),t.inviteDialogVisible=!0):(t.loadInvitableMembers(),t.inviteDialogVisible=!0)},inviteMember(t){let e=this;e.$http.post("/teambuild/sendinvitation",{teamId:e.teamInfo.teamId,userCode:t},t=>{t.success&&e.$message("已成功邀请")})},paginationChange(t){this.currPage=t,this.loadInvitableMembers()},deleteMember(t,e){let a=this;if("leader"===e)return this.$alert("不能移除队长！"),!1;this.$confirm("是否删除队员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.$http.post("/teambuild/deleteteambuildmember",{teamId:a.teamInfo.teamId,userCode:t},t=>{t.success&&(a.$message("删除成功！"),a.loadData())})})}}},u=c,d=(a("6ba4"),a("2877")),m=Object(d["a"])(u,s,o,!1,null,"b3cef6ec",null),p=m.exports,b=(a("7378"),a("16b4"),a("346c"),a("1e3b"),a("3a10"),a("87c5"),a("0cb1"),a("4dcb"),a("751a"));i["default"].prototype.$http=b["a"],new i["default"]({render:t=>t(p)}).$mount("#app")},c2c0:function(t,e,a){}});
//# sourceMappingURL=team-my.0586c6cd.js.map