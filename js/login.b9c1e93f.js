(function(t){function e(e){for(var n,s,l=e[0],i=e[1],c=e[2],d=0,p=[];d<l.length;d++)s=l[d],o[s]&&p.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,l=1;l<r.length;l++){var i=r[l];0!==o[i]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={login:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(){return Promise.resolve()},s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=i;a.push([13,"chunk-vendors","chunk-common"]),r()})({"0d65":function(t,e,r){"use strict";r.r(e);var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"login"}},[r("div",{staticClass:"container-fluid"},[r("Header"),r("hr",{staticStyle:{border:"none"}}),r("div",{staticClass:"login"},[t._m(0),r("div",{staticClass:"col-6 text-center pr-7"},[r("div",{staticClass:"main-title"},[t._v("登录")]),r("div",{staticClass:"second-title"},[t._v("砺英网 | 通行证")]),r("div",{staticClass:"row mt-6"},[r("div",{staticClass:"center-block",staticStyle:{width:"300px"}},[r("div",{staticClass:"row text-center"},[r("el-form",{ref:"form",staticClass:"mt-3",attrs:{model:t.form,rules:t.rules,"show-message":!0}},[r("el-form-item",{attrs:{prop:"phone"}},[r("el-input",{attrs:{placeholder:"你的手机号",maxlength:"11"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),r("el-form-item",{attrs:{prop:"pwd"}},[r("el-input",{attrs:{placeholder:"输入密码","show-password":"",maxlength:"20"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("form")}},model:{value:t.form.pwd,callback:function(e){t.$set(t.form,"pwd",e)},expression:"form.pwd"}})],1)],1)],1),r("div",{staticClass:"row mt-6 mb-3"},[r("div",{staticClass:"btn btn-block login-btn",on:{click:function(e){return t.login("form")}}},[t._v("登录")])]),t._m(1),t._m(2)])])])]),r("Footer")],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-6 pl-0"},[n("img",{attrs:{src:r("9411"),height:"560"}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("a",{staticClass:"pull-left reg-pwd",attrs:{href:"reg-student.html"}},[t._v("注册新账号")]),r("a",{staticClass:"pull-right reg-pwd",staticStyle:{color:"#999999"},attrs:{href:"forget-pwd.html"}},[t._v("忘记密码？")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row mt-6"},[r("div",{staticClass:"col-4"},[r("hr",{staticClass:"mb-0 mt-4"})]),r("div",{staticClass:"col-4"},[r("i",{staticClass:"iconfont iconbangdingweixin",staticStyle:{color:"#32C25A"}}),r("span",{staticClass:"wechat-login"},[t._v("微信登录")])]),r("div",{staticClass:"col-4"},[r("hr",{staticClass:"mb-0 mt-4"})])])}],s=r("a748"),l=r("e819"),i=r("3595"),c={name:"login",components:{Header:s["a"],Footer:l["a"]},mounted(){localStorage.clear(),null!==Object(i["a"])("type")&&(this.loginType=Object(i["a"])("type")),this.redirectUrl=Object(i["a"])("redirectUrl")},data(){var t=(t,e,r)=>{if(""===e)r(new Error("请输入手机号"));else{if(""!==this.form.phone){var n=/^1([38]\d|5[0-35-9]|7[3678])\d{8}$/;n.test(this.form.phone)||r(new Error("手机号格式不正确"))}r()}},e=(t,e,r)=>{this.form.phone=e.replace(/[^\d]/g,""),r()},r=(t,e,r)=>{""===e&&r(new Error("请输入密码 "));var n=/^(\w){6,20}$/;n.exec(e)||r(new Error("只能输入6-20个字母、数字、下划线 ")),r()};return{form:{phone:"",pwd:""},loginType:"lying",redirectUrl:"",rules:{phone:[{min:11,max:11,message:"手机号长度应为11位",trigger:"blur"},{validator:t,trigger:"blur"},{validator:e,trigger:"change"}],pwd:[{validator:r,trigger:"change"},{validator:r,trigger:"blur"}]}}},methods:{login(t){let e=this;e.$refs[t].validate(t=>{if(!t)return!1;this.$http.post("/user/login",{phone:this.form.phone,password:this.form.pwd},t=>{if(t.success){1===t.data.unreadStatus?localStorage.setItem("unreadStatus","true"):localStorage.setItem("unreadStatus","false"),localStorage.setItem("token",t.data.token),localStorage.setItem("userType",t.data.userType);var r=new FormData;r.append("phone",e.form.phone),r.append("password",e.form.pwd),e.$http.snspost("/member/lyinglogin",r,r=>{console.log(r),localStorage.setItem("snsNo",r.data.data),"lying"===e.loginType?"0"===t.data.userType?window.location="personal-main.html":window.location="assistant-main.html":"sns"===e.loginType&&window.open(e.$http.snsUrl+"/member/login?snsNo="+window.btoa(window.encodeURIComponent(localStorage.getItem("snsNo")))+"&redirectUrl="+e.redirectUrl,"_self")})}else e.$alert(t.errorMsg,"提示",{confirmButtonText:"确定"})})})}}},u=c,d=(r("ecf2"),r("e3e6"),r("2877")),p=Object(d["a"])(u,o,a,!1,null,"9a9aec8c",null),f=p.exports,m=(r("7378"),r("3a10"),r("751a"));n["default"].prototype.$http=m["a"],new n["default"]({render:t=>t(f)}).$mount("#login")},13:function(t,e,r){t.exports=r("0d65")},a7fa:function(t,e,r){},beec:function(t,e,r){},e3e6:function(t,e,r){"use strict";var n=r("beec"),o=r.n(n);o.a},ecf2:function(t,e,r){"use strict";var n=r("a7fa"),o=r.n(n);o.a}});
//# sourceMappingURL=login.b9c1e93f.js.map