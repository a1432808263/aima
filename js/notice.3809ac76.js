(function(t){function e(e){for(var s,n,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)n=r[d],o[n]&&p.push(o[n][0]),o[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},o={notice:0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(){return Promise.resolve()},n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([15,"chunk-vendors","chunk-common"]),a()})({15:function(t,e,a){t.exports=a("6e72")},"1ba8":function(t,e,a){"use strict";var s=a("b8a0"),o=a.n(s);o.a},"6e72":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"notice"}},[a("div",{staticClass:"container-fluid",staticStyle:{padding:"0px 0px 0px 0px"}},[a("Header",{attrs:{noticeIs:t.noticeIs,img:"",school:"Go语言实战抽奖系统"}})],1),a("div",{staticClass:"col-md-10 col-md-offset-1 mt-6"},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:t.showNotice,expression:"showNotice"}],staticClass:"mb-4",attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"project"}},[a("div",{staticStyle:{"font-size":"20px","margin-top":"20px"},attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-tickets"}),t._v(" 消息列表")]),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.materialTypes.length,expression:"materialTypes.length === 0"}]},[t._v("暂无消息")]),t._l(t.materialTypes,function(e,s){return a("div",{key:s,staticClass:"row"},[a("div",{staticClass:"col-md-12 col-xs-12 pull-left",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"java_tit mb-4"},[a("span",[t._v(t._s(e.kind))]),a("span",{staticClass:"pull-right",staticStyle:{color:"#000000",background:"#ffffff","margin-top":"1px"}},[t._v("\n                  "+t._s(e.time)+"\n")])]),a("div",{staticClass:"row pl-4 pr-5"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"item.status"}],staticClass:"pull-left java_color"},[t._v("["+t._s(e.status)+"]")]),a("span",{staticClass:"ml-3"},[t._v(t._s(e.content))]),a("a",{directives:[{name:"show",rawName:"v-show",value:"系统公告"===e.kind,expression:"item.kind === '系统公告'"}],staticClass:"pull-right font-small",on:{click:function(a){return t.showStail(e)}}},[t._v("查看详情")]),a("a",{directives:[{name:"show",rawName:"v-show",value:"系统公告"!==e.kind,expression:"item.kind !== '系统公告'"}],staticClass:"pull-right font-small",on:{click:function(a){return t.showStail(e)}}},[t._v("去查看")])])])])})],2)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showNotice,expression:"!showNotice"}],domProps:{innerHTML:t._s(t.htmlContent)}})],1)])},i=[],n=a("f6f6"),r=n["a"],l=(a("1ba8"),a("807d"),a("2877")),c=Object(l["a"])(r,o,i,!1,null,"7d15907f",null),u=c.exports,d=(a("7378"),a("16b4"),a("346c"),a("1e3b"),a("3a10"),a("87c5"),a("0cb1"),a("751a"));s["default"].prototype.$http=d["a"],new s["default"]({render:t=>t(u)}).$mount("#notice")},"764c":function(t,e,a){},"807d":function(t,e,a){"use strict";var s=a("764c"),o=a.n(s);o.a},b8a0:function(t,e,a){},f6f6:function(t,e,a){"use strict";(function(t){var s=a("10df");e["a"]={name:"notice",components:{Header:s["a"]},mounted(){this.initEvent(),this.initData()},data(){return{winWidth:window.innerWidth,activeName:"project",materialTypes:[],curPage:1,total:10,pageSize:20,dataChanged:!1,noticeIs:!1,showNotice:!1,htmlContent:""}},methods:{initEvent:function(){let e=this;"false"===localStorage.getItem("unreadStatus")?e.noticeIs=!1:e.noticeIs=!0,e.winWidth=t("body").width(),window.onresize=function(){e.winWidth=t("body").width()}},initData:function(){-1!==window.location.href.indexOf("?")?(document.title="公告详情",this.htmlContent=localStorage.getItem("urlContent"),this.showNotice=!1):(this.showNotice=!0,this.loadProjectinfo())},loadProjectinfo(){let t=this;t.materialTypes=[],this.$http.post("/doproject/noticeInfo",{},e=>{if(console.log(e),e.success){for(let a of e.data)t.materialTypes.push({id:a.id,kind:"系统公告",time:a.createTime,content:a.notice,url:a.url,status:""});this.$http.post("/doproject/pushMessageInfo",{},e=>{if(console.log(e),e.success){let i=0;for(let n of e.data){var a="未读";1===n.status&&(a="已读",i++);var s="",o="";1===n.messageType?(s="提交成果物",o="0"===localStorage.getItem("userType")?"task-list.html":"assistant-task-list.html"):2===n.messageType?(s="点评成果物",o="task-list.html"):3===n.messageType?(s="系统点评",o="task-list.html"):4===n.messageType&&(s="阶段报告",o="growth-locus.html"),e.data.length===i&&(localStorage.setItem("unreadStatus","false"),t.noticeIs=!1),t.materialTypes.push({id:n.id,kind:s,time:n.createTime,content:n.message,url:o,status:a,stepId:n.stepId,teamId:n.teamId})}}})}})},sizeChange(t){return this.winWidth*t/1920+"px"},refresh(){this.dataChanged=!0,this.$nextTick(()=>{this.dataChanged=!1})},gotoPage(t){},changeRowNum(t){},showStail(t){console.log(t),"提交成果物"===t.kind&&"1"===localStorage.getItem("userType")?this.$http.post("/assistant/jumpMessageDetail",{teamId:t.teamId},e=>{return console.log(e),window.location=t.url+"?teamId="+t.teamId+"&currentStepId="+t.stepId+"&projectId="+e.data.projectId+"&facultyMarjorId="+e.data.facultyMarjorId,!1}):"系统公告"!==t.kind&&"未读"===t.status?this.$http.post("/doproject/updateMessageStatus",{id:t.id},e=>{console.log(e),window.location=t.url}):"系统公告"===t.kind?(document.title="公告详情",this.htmlContent=t.url,this.showNotice=!1):(t.kind,window.location=t.url)}}}}).call(this,a("1157"))}});
//# sourceMappingURL=notice.3809ac76.js.map