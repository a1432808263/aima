(function(t){function e(e){for(var a,s,l=e[0],r=e[1],c=e[2],d=0,p=[];d<l.length;d++)s=l[d],n[s]&&p.push(n[s][0]),n[s]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);m&&m(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],a=!0,l=1;l<o.length;l++){var r=o[l];0!==n[r]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var a={},n={"video-player":0},i=[];function s(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(){return Promise.resolve()},s.m=t,s.c=a,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(o,a,function(e){return t[e]}.bind(null,a));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var m=r;i.push([38,"chunk-vendors","chunk-common"]),o()})({38:function(t,e,o){t.exports=o("6166")},6166:function(t,e,o){"use strict";o.r(e);var a=o("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container-fluid",staticStyle:{padding:"unset"},attrs:{id:"head_part"}},[a("Header",{attrs:{img:"",school:"Go语言实战抽奖系统"}})],1),a("div",{staticClass:"row pt-3",staticStyle:{"border-top":"1px solid #666"},attrs:{id:"video_part"}},[a("div",{staticClass:"col-xs-12 col-md-9 pt-6 pl-7 pr-0"},[t.showflg?a("div",{staticClass:"pull-right mt-4",staticStyle:{"background-color":"#1e1d1d","border-right":"1px solid #666"},attrs:{id:"vid"}}):t._e()]),a("div",{staticClass:"col-xs-12 col-md-3 pl-0 pr-7 pt-6",staticStyle:{"margin-top":"5px"}},[t._m(0),a("div",{staticClass:"col-xs-12 col-md-12 video-list-bg"},t._l(t.videoList,function(e,o){return a("div",{key:o,staticClass:"row mt-3",class:[e.materialUrl===t.vUrl?"video-selected":"video-bg"],on:{click:function(o){return t.changeVideo(e.materialUrl,e.id,e)}}},[a("i",{staticClass:"el-icon-caret-left video-playing"}),t._m(1,!0),a("div",{staticClass:"col-md-8 pull-left pointer"},[a("div",{staticStyle:{"padding-top":"7%","font-size":"16px"}},[t._v(t._s(e.materialName))]),a("div",{staticClass:"cr-tm",staticStyle:{"padding-top":"3%","font-size":"12px"}},[t._v("2019-06-18")])])])}),0)]),a("div",{staticClass:"pl-7 col-md-10",staticStyle:{"padding-left":"10px","margin-top":"15px"}},[a("span",{staticClass:"material-name font-bold"},[t._v(t._s(t.materialName))])]),a("div",{staticClass:"material-src pl-7 col-md-9"},[t._m(2),t._m(3),a("span",{staticClass:"pull-right"},[a("i",{staticClass:"el-icon-video-camera"}),t._v("播放数: "),a("span",{staticStyle:{color:"#00be06"}},[t._v(t._s(t.vPlayCount))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12 col-md-8 col-md-offset-2 p-2"},[a("div",{staticClass:"pointer font-large font-bold mt-4 comment-title",attrs:{id:"comment_area"}},[t._v("全部评论 ("+t._s(t.commentList.length)+")")]),a("div",{staticClass:"col-xs-12 col-md-12 p-2 mt-6 mb-6"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.myComment,expression:"myComment"}],staticClass:"el-textarea__inner",staticStyle:{"min-height":"200px"},attrs:{placeholder:"我来说点什么..."},domProps:{value:t.myComment},on:{input:function(e){e.target.composing||(t.myComment=e.target.value)}}}),a("div",{staticClass:"comment-btn pointer",on:{click:t.submitComment}},[a("span",[t._v("发布")])])]),a("div",{staticStyle:{margin:"10px",padding:"10px"}},[0==t.commentList.length?a("p",{staticClass:"text-center"},[a("img",{staticStyle:{width:"100%"},attrs:{src:o("306e")}}),t._v("暂无评论，我来发表第一篇评论！")]):a("div",t._l(t.commentList,function(e,o){return a("div",{key:o},[a("div",{staticClass:"comment-per"},[a("div",{staticClass:"col-md-1"},[a("img",{staticStyle:{width:"60px","border-radius":"50%",height:"60px"},attrs:{src:e.userPhotoUrl}})]),a("div",{staticClass:"comment col-md-11"},[null===e.commentId||""===e.commentId?a("div",{staticClass:"font-bold"},[t._v("\n                  "+t._s(e.discussantName)+" "),a("span",[t._v(t._s(e.commentTime))]),a("div",{staticClass:"pointer",staticStyle:{float:"right","margin-right":"20px"}},[a("a",{on:{click:function(o){return t.showFatherCommentArea(e)}}},[a("i",{staticClass:"icondazhongicon05 iconfont font-bold font-large",style:{color:e.iconColor}}),t._v(" "),a("span",{style:{color:e.iconColor,fontWeight:"300",fontSize:"12px"}},[t._v("回复")])])])]):t._e(),null===e.commentId||""===e.commentId?a("p",{domProps:{innerHTML:t._s(e.content)}},[e.stepName?a("span",[t._v("#"+t._s(e.stepName))]):t._e(),e.materialName?a("span",[t._v("#"+t._s(e.materialName))]):t._e(),t._v("\n                  "+t._s(e.content)+"\n                ")]):t._e(),t.commentReplyFlg?a("div",{staticClass:"mt-3 mb-3"},[e.newCommentReply?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newCommentReplyContent,expression:"item.newCommentReplyContent"}],staticClass:"el-textarea__inner",staticStyle:{"min-height":"100px"},attrs:{placeholder:e.place},domProps:{value:e.newCommentReplyContent},on:{input:function(o){o.target.composing||t.$set(e,"newCommentReplyContent",o.target.value)}}}):t._e(),e.newCommentReply?a("div",{staticClass:"new-reply-btn pointer",on:{click:function(o){return t.submitFatherComment(e)}}},[a("span",[t._v("发布")])]):t._e()]):t._e(),e.reply.length>0?a("div",{staticClass:"reply-list"},[a("list",{attrs:{comment:e},on:{submitSonComment:t.submitSonComment}})],1):t._e()])])])}),0)])])])])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-xs-12 font-large font-bold video-list-title",staticStyle:{color:"wheat"}},[t._v("播放列表 "),o("i",{staticClass:"el-icon-video-camera-solid",staticStyle:{"font-size":"20px","padding-top":"2px"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4 pl-0 pr-0"},[a("img",{staticClass:"video-img",attrs:{src:o("bee5")}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"pull-left",staticStyle:{"margin-left":"unset"}},[t._v("来源："),o("i",{staticClass:"iconfont iconlogo"})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"pull-right pointer"},[o("a",{staticStyle:{color:"#ddd"},attrs:{href:"#comment_area"}},[o("i",{staticClass:"el-icon-chat-dot-round"}),t._v("评论")])])}],s=o("f4b9"),l=s["a"],r=(o("ab82"),o("2877")),c=Object(r["a"])(l,n,i,!1,null,"20d7e5a0",null),m=c.exports,d=(o("7378"),o("3a10"),o("16b4"),o("346c"),o("1e3b"),o("87c5"),o("4dcb"),o("751a")),p=o("bc3a"),u=o.n(p),v=o("52f1"),g=o("6199"),h=o.n(g);a["default"].prototype.$sha=h.a,a["default"].prototype.$axios=u.a,a["default"].prototype.$http=d["a"],a["default"].prototype.$baseUrl=v["a"],new a["default"]({render:t=>t(m)}).$mount("#app")},ab82:function(t,e,o){"use strict";var a=o("ff0b"),n=o.n(a);n.a},f4b9:function(t,e,o){"use strict";(function(t){var a=o("10df"),n=o("6bec");o("7c15");e["a"]={name:"app",components:{Header:a["a"],List:n["a"]},mounted(){window.addEventListener("beforeunload",t=>this.setLearningTime()),t("#video_part").height(document.documentElement.clientHeight-t("#head_part").height()-11),t("#video_part").css({"background-color":"#292929"}),this.initData()},data(){return{vdHeight:"1",bdHeight:"",commentReplyFlg:!1,marginTop:"",materialId:"",vUrl:"",vPlayer:null,vPlayCount:0,showflg:!0,videoList:[],docList:[],myComment:"",commentList:[],materialName:""}},methods:{initData:function(){let t=this;t.materialId=localStorage.getItem("materialId"),t.materialName=localStorage.getItem("materialName"),this.vUrl=localStorage.getItem("materialVideo"),this.showflg=!0,t.vPlayer=polyvObject("#vid").videoPlayer({wrap:"#vid",width:.698*document.documentElement.clientWidth,vid:t.vUrl}),t.getVideoPlayCount(t.vUrl),t.projectId=localStorage.getItem("projectId"),t.$http.post("/doproject/materialsInfoByProject",{sourceType:0,projectId:t.projectId},e=>{if(e.success)for(var o=0;o<e.data.length;o++)1===e.data[o].materialType?t.videoList.push(e.data[o]):0===e.data[o].materialType&&t.docList.push(e.data[o])}),t.$http.post("/doproject/discussionTreeInfo",{projectId:localStorage.getItem("projectId")},e=>{e.success&&(t.commentList=e.data)})},loadDisscussionTree(){let t=this;t.$http.post("/doproject/discussionTreeInfo",{projectId:localStorage.getItem("projectId")},e=>{e.success&&(t.commentList=e.data)})},changeVideo(t,e,o){let a=this;a.showflg=!1;let n=new Date;n=a.getNowTime(n);let i={learnContent:a.materialId,operationTime:n,learningState:1};a.$http.post("/doproject/recordLearningTime",i,s=>{s.success&&a.$nextTick(()=>{a.vUrl=t,a.materialId=e,a.materialName=o.materialName,n=new Date,n=a.getNowTime(n),i={learnContent:a.materialId,operationTime:n,learningState:0},a.$http.post("/doproject/recordLearningTime",i,t=>{t.success&&(a.showflg=!0,setTimeout(function(){a.vPlayer=polyvObject("#vid").videoPlayer({wrap:"#vid",width:.698*document.documentElement.clientWidth,vid:a.vUrl}),a.getVideoPlayCount(a.vUrl)}))})})})},submitComment(){let t=this;if(null===t.myComment||void 0===t.myComment||""===t.myComment)return this.$message("内容不能为空！"),!1;let e=new Date;e=t.getNowTime(e),t.$http.post("/doproject/submitDiscussion",{commentTime:e,content:t.myComment,projectId:localStorage.getItem("projectId"),commentId:"",materialId:t.materialId},e=>{t.$message("发布成功"),t.myComment=null,t.loadDisscussionTree()})},submitSonComment(t){if(null===t.newReplyContent||void 0===t.newReplyContent||""===t.newReplyContent)return this.$message("内容不能为空！"),!1;let e=this,o=new Date;o=e.getNowTime(o),e.$http.post("/doproject/submitDiscussion",{commentTime:o,content:t.newReplyContent,projectId:localStorage.getItem("projectId"),commentId:t.commentId,materialId:e.materialId},t=>{e.$message("发布成功"),e.loadDisscussionTree()})},submitFatherComment(t){if(null===t.newCommentReplyContent||void 0===t.newCommentReplyContent||""===t.newCommentReplyContent)return this.$message("内容不能为空！"),!1;let e=this,o=new Date;o=e.getNowTime(o),e.$http.post("/doproject/submitDiscussion",{commentTime:o,content:t.newCommentReplyContent,projectId:localStorage.getItem("projectId"),commentId:t.id,materialId:e.materialId},t=>{e.$message("发布成功"),e.loadDisscussionTree()})},showFatherCommentArea(t){this.commentReplyFlg=!1,null===t.newCommentReply||void 0===t.newCommentReply?(t.newCommentReply=!0,t.place="回复"+t.discussantName,t.newCommentReplyContent=null,t.iconColor="#6612cf"):(t.newCommentReply=!t.newCommentReply,!1===t.newCommentReply?t.iconColor="black":t.iconColor="#6612cf"),this.commentReplyFlg=!0},getNowTime(t){var e=t.getFullYear()+"-",o=t.getMonth()+1<10?"0"+(t.getMonth()+1)+"-":t.getMonth()+1+"-",a=t.getDate()<10?"0"+t.getDate()+" ":t.getDate()+" ",n=t.getHours()<10?"0"+t.getHours()+":":t.getHours()+":",i=t.getMinutes()<10?"0"+t.getMinutes()+":":t.getMinutes()+":",s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();let l=e+o+a+n+i+s;return l},getVideoPlayCount(t){let e=this,o=Date.parse(new Date);var a="dr=this_year&period=monthly&ptime="+o+"&vid="+t+"TkSZYq88An";a=e.$sha(a),a=a.toLocaleUpperCase(),e.$axios({method:"GET",url:"http://api.polyv.net/v2/videoview/56c20fd00b?ptime="+o+"&sign="+a+"&dr=this_year&period=monthly&vid="+t,headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(t=>{let o=0;for(var a=0;a<t.data.data.length;a++)o+=t.data.data[a].pcVideoView;e.vPlayCount=o})},async setLearningTime(){let t=this,e=new Date;e=t.getNowTime(e);let o={learnContent:t.materialId,operationTime:e,learningState:1};await t.$axios({method:"post",url:t.$baseUrl+"/doproject/recordLearningTime",data:o,headers:{token:localStorage.getItem("token"),"Content-Type":"application/json; charset=UTF-8"}})}}}}).call(this,o("1157"))},ff0b:function(t,e,o){}});
//# sourceMappingURL=video-player.8192caf3.js.map