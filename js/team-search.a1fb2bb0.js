(function(t){function e(e){for(var o,l,n=e[0],s=e[1],c=e[2],u=0,p=[];u<n.length;u++)l=n[u],r[l]&&p.push(r[l][0]),r[l]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);m&&m(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,n=1;n<a.length;n++){var s=a[n];0!==r[s]&&(o=!1)}o&&(i.splice(e--,1),t=l(l.s=a[0]))}return t}var o={},r={"team-search":0},i=[];function l(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(){return Promise.resolve()},l.m=t,l.c=o,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(a,o,function(e){return t[e]}.bind(null,o));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],s=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var m=s;i.push([38,"chunk-vendors","chunk-common"]),a()})({38:function(t,e,a){t.exports=a("75a4")},6766:function(t,e,a){},"6fc3":function(t,e,a){"use strict";(function(t){var o=a("10df"),r=a("c80e"),i=a("d148");e["a"]={components:{Header:o["a"],ProjectTitle:r["a"],TeamTab:i["a"]},name:"app",mounted(){this.loadData()},data(){return{projectInfo:{},createTeamDialogVisible:!1,createTeamForm:{logoUrl:"/img/default-head.a8298c57.png",name:""},searchKey:"",canCompeleteTeam:!0,tabData:[{name:"选择项目",url:"course-detail.html"},{name:"组队",url:"team-search.html"},{name:"任务裁剪",url:""},{name:"人员管理",url:""}],teamData:[]}},methods:{loadData(){this.loadProjectInfo(),this.loadTeamList()},loadTeamList(){let t=this,e=localStorage.getItem("projectId"),a=localStorage.getItem("courseId"),o=localStorage.getItem("grade");this.$http.post("/teambuild/queryapplicableteamlist",{courseId:a,grade:o,projectId:e,teamOrLeaderName:t.searchKey.trim()},e=>{if(e.success){t.teamData=e.data;for(var a=0;a<t.teamData.length;a++)if(-1!==t.teamData[a].joinType&&0===t.teamData[a].joinStatus){t.canCompeleteTeam=!1;break}}})},loadProjectInfo(){let t=this,e=localStorage.getItem("projectId"),a=localStorage.getItem("courseId");this.$http.post("/teambuild/queryprojectinfo",{projectId:e,courseId:a},e=>{e.success&&(t.projectInfo=e.data,t.projectInfo.courseName=localStorage.getItem("courseName"))})},ifOwnTeam(){this.$http.post("/teambuild/queryteaminfoforleader",{},t=>{t.success&&(window.location="team-my.html")})},createTeam(){this.createTeamDialogVisible=!this.createTeamDialogVisible},createTeamSave(){let t=this,e=localStorage.getItem("projectId"),a=localStorage.getItem("courseId"),o=localStorage.getItem("grade"),r=this.createTeamForm.name.trim(),i=/[^A-Za-z0-9\u4e00-\u9fa5]+/;return null==r||""===r||void 0===r?(this.$alert("团队名称不能为空","提示",{confirmButtonText:"确定"}),!1):!0===i.test(r)||!1===this.getStrLenght(r,16)?(this.$alert("团队名称只能输入汉字、英文、数字并且字符长度不能大于16","提示",{confirmButtonText:"确定"}),!1):void this.$http.post("/teambuild/buildteam",{logoUrl:this.createTeamForm.logoUrl,teamName:this.createTeamForm.name,courseId:a,projectId:e,grade:o},e=>{e.success&&(t.createTeamDialogVisible=!1,window.location="team-my.html")})},applyJoin(t){localStorage.setItem("teamId",t),window.location="team-view.html"},uploadPhoto(t){let e=this,a=t.target.files[0],o=new FormData;o.append("file",a),this.$http.uploadFile("/teambuild/uploadimgforteam",o,t=>{t.success&&(e.$alert("上传成功！","提示",{confirmButtonText:"确定"}),e.createTeamForm.logoUrl=t.data)})},goTeam(t){localStorage.setItem("teamId",t.teamId),localStorage.setItem("myJoinType",t.joinType),localStorage.setItem("myJoinStatus",t.joinStatus),window.location="team-view.html"},getStrLenght(e,a){for(var o=0,r=t.trim(e),i=0;i<r.length;i++)!0===this.isCN(r.charAt(i))?o+=2:o+=1;return!(o>a)},isCN(t){var e=/[u00-uff]/;return!e.test(t)}}}}).call(this,a("1157"))},"75a4":function(t,e,a){"use strict";a.r(e);var o=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container-fluid",staticStyle:{padding:"unset"}},[a("Header",{attrs:{school:"东北大学"}}),a("ProjectTitle",{attrs:{data:t.projectInfo}}),a("TeamTab",{staticStyle:{display:"none"},attrs:{data:t.tabData,"active-index":1}}),a("div",{staticClass:"container"},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[t._v("加入团队")]),a("el-form",{staticClass:"demo-form-inline pull-right",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"团队名称或队长姓名"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},[a("i",{staticClass:"iconfont iconqitasousuo",attrs:{slot:"suffix"},on:{click:t.loadData},slot:"suffix"})])],1),a("el-form-item",{staticStyle:{display:"none"}},[a("el-button",{staticClass:"pull-left",attrs:{type:"primary"},on:{click:t.ifOwnTeam}},[t._v("我的团队")])],1),!0===t.canCompeleteTeam?a("el-form-item",[a("el-button",{staticClass:"pull-left",attrs:{type:"primary"},on:{click:t.createTeam}},[t._v("我要组队")])],1):a("el-form-item",[a("a",{attrs:{title:"您目前有申请的团队或被其他团队邀请，不能创建组队！"}},[a("el-button",{staticClass:"pull-left",attrs:{type:"primary",disabled:""}},[t._v("我要组队")])],1)])],1)],1),t.teamData.length>0?a("div",{staticClass:"main"},t._l(t.teamData,function(e){return a("div",{key:e.id,staticClass:"team-box"},[a("div",{staticClass:"logo",style:{backgroundImage:"url("+e.logoPath+")"}}),a("div",{staticClass:"name"},[t._v(t._s(e.teamName))]),a("div",{staticClass:"count"},[t._v("当前人数 "+t._s(e.currentMemberCount)+"人")]),1===e.joinStatus?a("el-button",{on:{click:function(a){return t.goTeam(e)}}},[t._v("已加入")]):t._e(),0===e.joinType&&0===e.joinStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.goTeam(e)}}},[t._v("已被邀请")]):t._e(),1===e.joinType&&0===e.joinStatus?a("el-button",{on:{click:function(a){return t.goTeam(e)}}},[t._v("已申请")]):t._e(),0===e.joinType&&0===e.applicableTeamStatus&&-1===e.joinStatus?a("el-button",{on:{click:function(a){return t.goTeam(e)}}},[t._v("已拒绝")]):t._e(),1===e.joinType&&0===e.applicableTeamStatus&&-1===e.joinStatus?a("el-button",{on:{click:function(a){return t.goTeam(e)}}},[t._v("已被拒绝")]):t._e(),-1===e.joinType&&1!==e.applicableTeamStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.goTeam(e)}}},[t._v("申请加入")]):t._e()],1)}),0):t._e(),0===t.teamData.length?a("div",{staticClass:"main",staticStyle:{overflow:"auto"}},[a("div",{staticStyle:{width:"100%",height:"200px","line-height":"200px","text-align":"center"}},[t._v("暂无可加入的团队")])]):t._e()])],1),a("el-dialog",{attrs:{title:"创建团队",visible:t.createTeamDialogVisible,width:"468px",center:""},on:{"update:visible":function(e){t.createTeamDialogVisible=e}}},[a("div",{staticClass:"content"},[a("el-form",{ref:"createTeamForm",attrs:{model:t.createTeamForm,"label-width":"90px"}},[a("div",{staticClass:"head-portrait",style:{backgroundImage:"url("+t.createTeamForm.logoUrl+")"}},[a("div",{staticClass:"model",on:{click:function(e){return t.$refs.headPortrait.click()}}},[t._v("上传头像")]),a("input",{ref:"headPortrait",staticStyle:{display:"none"},attrs:{type:"file",name:"fileUpload"},on:{change:function(e){return t.uploadPhoto(e)}}})]),a("el-form-item",{staticClass:"mt-5",attrs:{label:"团队名称："}},[a("el-input",{model:{value:t.createTeamForm.name,callback:function(e){t.$set(t.createTeamForm,"name",e)},expression:"createTeamForm.name"}})],1),a("el-form-item",{attrs:{label:"团队人数："}},[t.projectInfo.minCount&&t.projectInfo.maxCount?a("span",[t._v(t._s(t.projectInfo.minCount)+"-"+t._s(t.projectInfo.maxCount)+"人")]):t._e()])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"198px"},attrs:{type:"primary"},on:{click:t.createTeamSave}},[t._v("保存")])],1)])],1)},i=[],l=a("6fc3"),n=l["a"],s=(a("bb43"),a("2877")),c=Object(s["a"])(n,r,i,!1,null,"20b4bcea",null),m=c.exports,u=(a("7378"),a("16b4"),a("346c"),a("1e3b"),a("3a10"),a("87c5"),a("0cb1"),a("4dcb"),a("751a")),p=a("52f1"),d=a("bc3a"),f=a.n(d);o["default"].prototype.$http=u["a"],o["default"].prototype.$axios=f.a,o["default"].prototype.$baseUrl=p["a"],new o["default"]({render:t=>t(m)}).$mount("#app")},bb43:function(t,e,a){"use strict";var o=a("6766"),r=a.n(o);r.a}});
//# sourceMappingURL=team-search.a1fb2bb0.js.map