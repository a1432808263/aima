(function(t){function e(e){for(var a,s,l=e[0],r=e[1],m=e[2],d=0,p=[];d<l.length;d++)s=l[d],n[s]&&p.push(n[s][0]),n[s]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);c&&c(e);while(p.length)p.shift()();return i.push.apply(i,m||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],a=!0,l=1;l<o.length;l++){var r=o[l];0!==n[r]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var a={},n={"video-player":0},i=[];function s(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(){return Promise.resolve()},s.m=t,s.c=a,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(o,a,function(e){return t[e]}.bind(null,a));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var m=0;m<l.length;m++)e(l[m]);var c=r;i.push([39,"chunk-vendors","chunk-common"]),o()})({"037a":function(t,e,o){},"283d":function(t,e,o){"use strict";var a=o("037a"),n=o.n(a);n.a},"306e":function(t,e,o){t.exports=o.p+"img/no_data1.b8c85053.png"},39:function(t,e,o){t.exports=o("6166")},6166:function(t,e,o){"use strict";o.r(e);var a=o("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container-fluid",staticStyle:{padding:"unset"},attrs:{id:"head_part"}},[a("Header",{attrs:{img:"",school:"Go语言实战抽奖系统"}})],1),a("div",{staticClass:"row pt-3",staticStyle:{"border-top":"1px solid #666"},attrs:{id:"video_part"}},[a("div",{staticClass:"col-xs-12 col-md-6 col-md-offset-1 pt-2 pr-0"},[t.showflg?a("div",{attrs:{id:"vid"}}):t._e(),a("div",{attrs:{id:"block-E"}}),a("div",{staticClass:"col-md-10 pl-0"},[a("h1",[t._v(t._s(t.materialName))])]),a("div",{staticClass:"material-src col-md-12 pl-0 pr-0"},[t._m(0),a("span",{staticClass:"pull-left"},[t._v("发布时间:2019-03-09")]),t._m(1),a("span",{staticClass:"pull-right"},[a("i",{staticClass:"el-icon-video-camera"}),t._v("播放数:"),a("span",{staticStyle:{color:"#00be06"}},[t._v(t._s(t.vPlayCount))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12 col-md-12 p-2 pt-7"},[a("div",{staticClass:"pointer font-large font-bold mt-4 comment-title",attrs:{id:"comment_area"}},[t._v("全部评论 ("+t._s(t.commentList.length)+")")]),a("div",{staticClass:"col-xs-12 col-md-12 p-2 mt-6 mb-6"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.myComment,expression:"myComment"}],staticClass:"el-textarea__inner",staticStyle:{"min-height":"200px"},attrs:{placeholder:"我来说点什么..."},domProps:{value:t.myComment},on:{input:function(e){e.target.composing||(t.myComment=e.target.value)}}}),a("div",{staticClass:"comment-btn pointer",on:{click:t.submitComment}},[a("span",[t._v("发布")])])]),a("div",{staticStyle:{margin:"10px",padding:"10px"}},[0==t.commentList.length?a("p",{staticClass:"text-center"},[a("img",{staticStyle:{width:"100%"},attrs:{src:o("306e")}}),t._v("暂无评论，我来发表第一篇评论！")]):a("div",t._l(t.commentList,function(e,o){return a("div",{key:o},[a("div",{staticClass:"comment-per"},[a("div",{staticClass:"col-md-1"},[a("img",{staticStyle:{width:"54px","border-radius":"50%",height:"54px"},attrs:{src:e.userPhotoUrl}})]),a("div",{staticClass:"comment col-md-11"},[null===e.commentId||""===e.commentId?a("div",{staticClass:"font-bold"},[t._v("\n                      "+t._s(e.discussantName)+" "),a("span",[t._v(t._s(e.commentTime))]),a("div",{staticClass:"pointer",staticStyle:{float:"right","margin-right":"20px"}},[a("a",{on:{click:function(o){return t.showFatherCommentArea(e)}}},[a("i",{staticClass:"icondazhongicon05 iconfont font-bold font-large",style:{color:e.iconColor}}),t._v(" "),a("span",{style:{color:e.iconColor,fontWeight:"300",fontSize:"12px"}},[t._v("回复")])])])]):t._e(),null===e.commentId||""===e.commentId?a("p",{domProps:{innerHTML:t._s(e.content)}},[e.stepName?a("span",[t._v("#"+t._s(e.stepName))]):t._e(),e.materialName?a("span",[t._v("#"+t._s(e.materialName))]):t._e(),t._v("\n                      "+t._s(e.content)+"\n                    ")]):t._e(),t.commentReplyFlg?a("div",{staticClass:"mt-3 mb-3"},[e.newCommentReply?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newCommentReplyContent,expression:"item.newCommentReplyContent"}],staticClass:"el-textarea__inner",staticStyle:{"min-height":"100px"},attrs:{placeholder:e.place},domProps:{value:e.newCommentReplyContent},on:{input:function(o){o.target.composing||t.$set(e,"newCommentReplyContent",o.target.value)}}}):t._e(),e.newCommentReply?a("div",{staticClass:"new-reply-btn pointer",on:{click:function(o){return t.submitFatherComment(e)}}},[a("span",[t._v("发布")])]):t._e()]):t._e(),e.reply.length>0?a("div",{staticClass:"reply-list"},[a("list",{attrs:{comment:e},on:{submitSonComment:t.submitSonComment}})],1):t._e()])])])}),0)])])])]),a("div",{staticClass:"col-xs-12 col-md-4 mt-2 pr-0 play-list ml-6",attrs:{id:"play-list"}},t._l(t.videoList,function(e,o){return a("div",{key:o,staticClass:"play-item col-md-12 col-xs-12",on:{click:function(o){return t.changeVideo(e.materialUrl,e.id,e)}}},[a("div",{staticClass:"mod-left col-md-6 pr-0 pl-0"},[a("img",{staticClass:"play-img",style:{height:t.sizeChange(118,"height")},attrs:{src:e.materialImg}}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.materialUrl===t.vUrl,expression:"video.materialUrl === vUrl"}],staticClass:"img-border"})]),a("div",{staticClass:"mod-right pull-left col-md-6"},[a("h3",{class:[e.materialUrl===t.vUrl?"playing-color":""]},[t._v(t._s(e.materialName))]),a("span",{staticClass:"row pull-left play-src"},[t._v("爱码学院")]),e.materialUrl!==t.vUrl?a("span",{staticClass:"row pull-left"},[a("i",{staticClass:"el-icon-pie-chart font-bold"}),a("span",{staticClass:"play-date"},[t._v("2016-03-09")])]):a("span",{staticClass:"row pull-left playing-color"},[a("i",{staticClass:"el-icon-video-play font-bold playing-color"}),a("span",{staticClass:"playing-color"},[t._v("播放中")])])])])}),0)])])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"pull-left",staticStyle:{"margin-left":"unset"}},[t._v("来源:"),o("i",{staticClass:"iconfont iconlogo"})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"pull-right pointer"},[o("a",{attrs:{href:"#comment_area"}},[o("i",{staticClass:"el-icon-chat-dot-round"}),t._v("评论")])])}],s=o("10df"),l=o("6bec"),r=o("1157"),m=o.n(r),c={name:"app",components:{Header:s["a"],List:l["a"]},mounted(){let t=this;window.addEventListener("beforeunload",e=>t.setLearningTime(e)),this.initData()},destroyed(){let t=this;window.removeEventListener("beforeunload",e=>t.setLearningTime(e))},data(){return{vdHeight:"1",bdHeight:"",commentReplyFlg:!1,marginTop:"",materialId:"",vUrl:"",vPlayer:null,vPlayCount:0,showflg:!0,videoList:[],docList:[],myComment:"",commentList:[],materialName:"",winWidth:window.innerWidth,winHeight:window.innerHeight,polyvUserId:"56c20fd00b"}},methods:{initData:function(){let t=this;t.materialId=localStorage.getItem("materialId"),t.materialName=localStorage.getItem("materialName"),this.vUrl=localStorage.getItem("materialVideo"),this.showflg=!0,m()("#play-list").css({height:this.sizeChange(590,"height")}),t.vPlayer=polyvObject("#vid").videoPlayer({wrap:"#vid",width:.5*t.winWidth+"px",height:.5*t.winWidth/4*3,vid:t.vUrl}),t.getVideoPlayCount(t.vUrl),t.projectId=localStorage.getItem("projectId"),t.$http.post("/doproject/materialsInfoByProject",{sourceType:0,projectId:t.projectId},e=>{if(e.success)for(var o=0;o<e.data.length;o++)if(1===e.data[o].materialType){let a=e.data[o];t.getVideoFirstImage(e.data[o].materialUrl).then(function(e){a["materialImg"]=e.data.data,t.videoList.push(a)})}else 0===e.data[o].materialType&&t.docList.push(e.data[o])}),t.$http.post("/doproject/discussionTreeInfo",{projectId:localStorage.getItem("projectId")},e=>{e.success&&(t.commentList=e.data)})},loadDisscussionTree(){let t=this;t.$http.post("/doproject/discussionTreeInfo",{projectId:localStorage.getItem("projectId")},e=>{e.success&&(t.commentList=e.data)})},changeVideo(t,e,o){let a=this;a.showflg=!1;let n=new Date;n=a.getNowTime(n);let i={learnContent:a.materialId,operationTime:n,learningState:1};a.$http.post("/doproject/recordLearningTime",i,s=>{s.success&&a.$nextTick(()=>{a.vUrl=t,a.materialId=e,a.materialName=o.materialName,n=new Date,n=a.getNowTime(n),i={learnContent:a.materialId,operationTime:n,learningState:0},a.$http.post("/doproject/recordLearningTime",i,t=>{t.success&&(a.showflg=!0,setTimeout(function(){a.vPlayer=polyvObject("#vid").videoPlayer({wrap:"#vid",width:.5*a.winWidth+"px",height:.5*a.winWidth/4*3,vid:a.vUrl}),a.getVideoPlayCount(a.vUrl),m()("html,body").animate({scrollTop:m()("div#head_part").offset().top},500)}))})})})},submitComment(){let t=this;if(null===t.myComment||void 0===t.myComment||""===t.myComment)return t.$alert("内容不能为空！","提示",{confirmButtonText:"确定"}),!1;let e=new Date;e=t.getNowTime(e),t.$http.post("/doproject/submitDiscussion",{commentTime:e,content:t.myComment,projectId:localStorage.getItem("projectId"),commentId:"",materialId:t.materialId},e=>{t.$alert("发布成功！","提示",{confirmButtonText:"确定"}),t.myComment=null,t.loadDisscussionTree()})},submitSonComment(t){if(null===t.newReplyContent||void 0===t.newReplyContent||""===t.newReplyContent)return this.$alert("内容不能为空！","提示",{confirmButtonText:"确定"}),!1;let e=this,o=new Date;o=e.getNowTime(o),e.$http.post("/doproject/submitDiscussion",{commentTime:o,content:t.newReplyContent,projectId:localStorage.getItem("projectId"),commentId:t.commentId,materialId:e.materialId},t=>{e.$alert("发布成功！","提示",{confirmButtonText:"确定"}),e.loadDisscussionTree()})},submitFatherComment(t){if(null===t.newCommentReplyContent||void 0===t.newCommentReplyContent||""===t.newCommentReplyContent)return this.$alert("内容不能为空！","提示",{confirmButtonText:"确定"}),!1;let e=this,o=new Date;o=e.getNowTime(o),e.$http.post("/doproject/submitDiscussion",{commentTime:o,content:t.newCommentReplyContent,projectId:localStorage.getItem("projectId"),commentId:t.id,materialId:e.materialId},t=>{e.$alert("发布成功！","提示",{confirmButtonText:"确定"}),e.loadDisscussionTree()})},showFatherCommentArea(t){this.commentReplyFlg=!1,null===t.newCommentReply||void 0===t.newCommentReply?(t.newCommentReply=!0,t.place="回复"+t.discussantName,t.newCommentReplyContent=null,t.iconColor="#6612cf"):(t.newCommentReply=!t.newCommentReply,!1===t.newCommentReply?t.iconColor="black":t.iconColor="#6612cf"),this.commentReplyFlg=!0},getNowTime(t){var e=t.getFullYear()+"-",o=t.getMonth()+1<10?"0"+(t.getMonth()+1)+"-":t.getMonth()+1+"-",a=t.getDate()<10?"0"+t.getDate()+" ":t.getDate()+" ",n=t.getHours()<10?"0"+t.getHours()+":":t.getHours()+":",i=t.getMinutes()<10?"0"+t.getMinutes()+":":t.getMinutes()+":",s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();let l=e+o+a+n+i+s;return l},getVideoPlayCount(t){let e=this,o=Date.parse(new Date);var a="dr=this_year&period=monthly&ptime="+o+"&vid="+t+"TkSZYq88An";a=e.$sha(a),a=a.toLocaleUpperCase(),e.$axios({method:"GET",url:"http://api.polyv.net/v2/videoview/56c20fd00b?ptime="+o+"&sign="+a+"&dr=this_year&period=monthly&vid="+t,headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(t=>{let o=0;for(var a=0;a<t.data.data.length;a++)o+=t.data.data[a].pcVideoView;e.vPlayCount=o})},getVideoFirstImage(t){let e=this,o=Date.parse(new Date),a="ptime="+o+"&vid="+t+"TkSZYq88An";return a=e.$sha(a),a=a.toLocaleUpperCase(),e.$axios({method:"GET",url:"http://api.polyv.net/v2/video/56c20fd00b/get-image?ptime="+o+"&sign="+a+"&vid="+t,headers:{"Content-Type":"application/json; charset=UTF-8"}})},setLearningTime(t){let e=this,o=new Date;o=e.getNowTime(o);let a={learnContent:e.materialId,operationTime:o,learningState:1};a=JSON.stringify(a),m.a.ajax({url:e.$baseUrl+"/doproject/recordLearningTime",type:"post",async:!1,data:a,contentType:"application/json",beforeSend:function(t){t.setRequestHeader("token",localStorage.getItem("token"))},success:function(t){}})},sizeChange(t,e){return"width"===e?this.winWidth*t/1344+"px":"height"===e?this.winHeight*t/739+"px":void 0}}},d=c,p=(o("283d"),o("2877")),u=Object(p["a"])(d,n,i,!1,null,"26d52233",null),h=u.exports,v=(o("7378"),o("3a10"),o("16b4"),o("346c"),o("1e3b"),o("87c5"),o("4dcb"),o("751a")),g=o("bc3a"),f=o.n(g),y=o("52f1"),C=o("6199"),w=o.n(C);a["default"].prototype.$sha=w.a,a["default"].prototype.$axios=f.a,a["default"].prototype.$http=v["a"],a["default"].prototype.$baseUrl=y["a"],new a["default"]({render:t=>t(h)}).$mount("#app")}});
//# sourceMappingURL=video-player.d1d13f5f.js.map